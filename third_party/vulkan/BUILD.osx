licenses(["notice"])

cc_library(
    name = "vulkan",
    srcs = ["lib/libvulkan.1.dylib"],
    hdrs = glob(["include/vulkan/*.h"]),
    data = select({
        "optimal_build": [
            "share/vulkan/icd.d/MoltenVK_icd.json",
            "lib/libMoltenVK.dylib",
        ],
        "//conditions:default": glob(
            [
                "share/**/*",
                "lib/**/*",
            ],
            exclude = ["lib/libvulkan.1.dylib"],
        ),
    }),
    include_prefix = "third_party/vulkan",
    strip_include_prefix = "include/vulkan",
    visibility = ["//visibility:public"],
)

config_setting(
    name = "optimal_build",
    values = {"compilation_mode": "opt"},
)
