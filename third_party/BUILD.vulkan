package(default_visibility = ["//visibility:public"])

licenses(["notice"])

cc_library(
    name = "vulkan",
    srcs = ["lib/libvulkan.dylib"],
    hdrs = glob(["include/vulkan/*.h"]),
    strip_include_prefix = "include/vulkan",
    include_prefix = "third_party/vulkan",
    data = select({
        "optimal_build": [
            "share/vulkan/icd.d/MoltenVK_icd.json",
            "lib/libMoltenVK.dylib",
        ],
        "//conditions:default": glob(
            ["share/**/*", "lib/**/*"],
            exclude = ["lib/libvulkan.dylib"],
        ),
    }),
)

config_setting(
    name = "optimal_build",
    values = {"compilation_mode": "opt"},
)